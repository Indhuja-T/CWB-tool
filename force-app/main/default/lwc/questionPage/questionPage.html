<template>
    <div style="background-color: #39603D;background-position:full">
    <template class="employee"  if:true={Active}>
    <template  if:true={showUser}  >
        <div class="slds-p-top_xx-large slds-align_absolute-center" style="position:relative">
        <div class="slds-box color" style="width:500px;">
            <lightning-card>
                <div class="slds-card-header">
                    <h1 class="h1" style="text-align:center">Employee Details</h1><br><br>
                </div>
                <label class="label-input" for="Employee_ID">Employee ID</label>
                    <lightning-input class="input" name="Employee_ID" type="text" id="Employee_ID" val={userDetails} onchange={userChangeHandler} ></lightning-input><br>
                <label class="label-input"  for="Employee_Name">Employee Name</label>
                    <lightning-input class="input" name="Employee_Name" type="text" id="Employee_Name" val={userDetails} onchange={userChangeHandler} ></lightning-input><br>
                <label class="label-input" for="Email">Email</label>
                    <lightning-input class="input" name="Email" type="email" id="Email" val={userDetails} onchange={userChangeHandler} ></lightning-input><br>
                <lightning-button class="slds-button slds-p-left_xx-small" label="Confirm"  type="submit" onclick={confirmHandler} variant="brand"></lightning-button><br>
            </lightning-card>
        </div>
    </div>
    </template>
        <template if:true={editTemplate}>  
            <div class="slds-modal slds-fade-in-open slds-backdrop">  
                <div class="slds-modal__container">  
                <!------HEADER Section-->  
                    <div class="slds-modal__header">  
                        <lightning-button-icon  icon-name="utility:close" alternative-text="Close this window" size="large"  
                            variant="bare-inverse" onclick={closeModal} class="slds-modal__close">  
                        </lightning-button-icon>  
                        <h2 class="h2">Welcome!</h2>  
                    </div>  
                <!------Body Section-->  
                    <div class="slds-modal__content slds-p-around_medium slds-text-align_center">  
                        <P class="p">You have already submitted your response <br>  
                            If you want to edit your previous response click "Ok"<br>
                            If you dont want to make changes to your previous response select "Cancel"  
                        </P>  
                    </div>  
                <!------Footer Section-->  
                    <div class="slds-modal__footer"> 
                        <lightning-button icon-name="utility:check" label="Ok" variant="brand" class="slds-float_left" onclick={editResponseTemplate}></lightning-button> 
                        <lightning-button icon-name="utility:close" label="Cancel" variant="brand" onclick={closeModal}> </lightning-button> 
                    </div>  
                </div>  
            </div>  
          </template>
          <!-- Question box for edit response-->
          <div if:true={editValues} class="slds-box">
            <lightning-card class="title" >
                <h1 class="h1" >{title}</h1><br><br>
                <ul>
                    <template for:each={lstQuestions} for:item="que" for:index="indexvar">
                        <li key={que.Question_ID__c}>
                            <div class="slds-p-around_medium lgc-bg">
                                <lightning-tile >
                                    <!--  <lightning-formatted-rich-text value={que.Question_ID__r.Question_Text__c}></lightning-formatted-rich-text> -->
                                      <c-child-input-type-component class="input-design" label={que.Question_ID__r.Question_Text__c} name={que.Question_ID__c} dt={que} val={que.Question_ID__r.Picklist_Values__c} value={lstAnswers} pass={que.Required__c} onprogressvaluechange={hanldeProgressValueChange}></c-child-input-type-component>
                                </lightning-tile>
                            </div>
                        </li>
                    </template>
                        <lightning-button label="SAVE"  type="submit" variant="brand" onclick={saveHandler}></lightning-button>
                        <lightning-input type="toggle" label="See other's Response"  message-toggle-active="" message-toggle-inactive=""  onclick={toggleClick} variant="brand" class="slds-float_right" ></lightning-input>              
                </ul>
            </lightning-card> 
          </div>
          <!--Question box for first time response-->
    <div if:false={editTemplate}>
        <template if:true={showForm}>
            <div class="slds-box">
                <lightning-card class="title" >
                    <h1 class="h1" >{title}</h1>
                    <br><br>
                    <ul>
                        <template if:true={responseReceived}> 
                            <template for:each={lstQuestions} for:item="que" for:index="indexvar">
                                <li key={que.Question_ID__c}>
                                    <div class="slds-p-around_medium lgc-bg">
                                        <lightning-tile >
                                         <!--   <lightning-formatted-rich-text value={que.Question_ID__r.Question_Text__c}></lightning-formatted-rich-text> -->
                                            <c-child-input-type-component  label={que.Question_ID__r.Question_Text__c} name={que.Question_ID__c} dt={que} val={que.Question_ID__r.Picklist_Values__c} pass={que.Required__c} onprogressvaluechange={hanldeProgressValueChange}></c-child-input-type-component> 
                                        </lightning-tile>
                                    </div>
                                </li>
                            </template>
                                <lightning-button class="button" label="SAVE" key={savekey} type="submit" variant="brand" onclick={saveHandler}></lightning-button>
                                <lightning-input type="toggle" key={toggleKey} label="See other's Response"  message-toggle-active="" message-toggle-inactive=""  onclick={toggleClick} variant="brand" class="slds-float_right" ></lightning-input>  
                        </template>
                    </ul>
                </lightning-card> 
            </div>
        </template>
        <!--Table display template-->
        <template if:true={wantResponse}>  
            <template if:true={showTable}>
                <lightning-datatable
                    column-widths-mode="auto"
                    key-field="Id"
                    data={lstQueResponse}
                    columns={columns}
                    hide-checkbox-column="true"
                    show-row-number-column="true"
                    fixed-header="true"
                >
                </lightning-datatable>
            </template>
        </template>
        <!--Response saved message-->
        <template if:false={wantResponse}>
            <template if:true={showTable}>
                <div class="slds-modal slds-fade-in-open slds-backdrop">  
                    <div class="slds-modal__container">  
                    <!------HEADER Section-->  
                        <div class="slds-modal__header">   
                            <h2 class="h2">Thank you!</h2>  
                        </div>  
                    <!------Body Section-->  
                        <div class="slds-modal__content slds-p-around_medium slds-text-align_center">  
                            <P class="p">You have submitted your response <br>  
                              You can close this page<br>  
                            </P>  
                        </div>  
                    </div>  
                </div>  
            </template>
        </template> 
    </div>
</template>
<template if:false={Active}>
    <div class="slds-modal slds-fade-in-open slds-backdrop">  
        <div class="slds-modal__container">  
        <!------HEADER Section-->  
            <div class="slds-modal__header">   
                <h2 class="h2">Sorry for the inconvenience</h2>  
            </div>  
        <!------Body Section-->  
            <div class="slds-modal__content slds-p-around_medium slds-text-align_center">  
                <P class="p">This survey is no longer valid<br>  
                </P>  
            </div>  
        </div>  
    </div>  
</template>
</div>
</template>